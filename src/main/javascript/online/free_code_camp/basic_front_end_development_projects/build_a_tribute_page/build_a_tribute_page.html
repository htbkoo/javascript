<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Build a Tribute Page</title>
        <link href="https://fonts.googleapis.com/css?family=Sahitya|Share+Tech+Mono|Yanone+Kaffeesatz" rel="stylesheet">
        <link href="./background-build_a_tribute_page.css" rel="stylesheet">
        <link href="./build_a_tribute_page.css" rel="stylesheet">
    </head>
    <body>
        <link href="https://fonts.googleapis.com/css?family=Sahitya|Share+Tech+Mono|Yanone+Kaffeesatz" rel="stylesheet">
        <!--Reference: https://github.com/GoogleChrome/ui-element-samples/blob/gh-pages/parallax/index.html -->
        <div class="viewport">
            <div>
                <!-- Specifying a parallax rate of 0.3 will slide the image at that proportion of the scroll speed. -->
                <div class="parallax header pianoKey1" parallax="0.3"></div>
                <div class="scene header">
                    <h1>PIANO</h1>
                    <h2>one of the world's most familiar instruments</h2>
                </div>
                <div class="scene solid star">
                    <p>
                        <strong>P</strong>iano is an acoustic, stringed musical instrument invented around the year
                        1700. It had
                        become widespread in Western society by the end of the 18th centuries, and is still widely
                        played today.
                    </p>
                    <p>
                        And it is a crucial instrument in many musical genres For example, classical, jazz, traditional,
                        popular, jazz fusion, funk music and rock music.
                    </p>
                    <p>
                        Since invention, the piano had evolved a lot thanks to the advance of technology. And here are
                        some
                        common types of piano.
                    </p>
                </div>
                <!-- When a rate isn't specified, it will be calculated such that the image always fills the space between the
                     element before it and the next element with the "parallax-cover" attribute. -->
                <div class="parallax grand1" parallax></div>
                <div class="scene woods">
                    <h1>Grand Piano</h1>
                    <h2>Powerful - for Classical solos and chamber music</h2>
                </div>
                <div class="scene solid woods" parallax-cover>
                    <p>
                        <Strong>G</Strong>rand pianos have horizontal frame and strings, with the strings extending away
                        from the keyboard. The action lies beneath the strings, and uses gravity as its means of return
                        to a
                        state of rest.
                    </p>
                    <p>
                        Concert grand has a brilliant, singing and sustaining tone quality. This is one of the principal
                        reasons
                        that full-size grands are used in the concert hall during piano concerto with orchestra.
                    </p>
                </div>
                <!-- When a rate isn't specified and there is no subsequent element with the "parallax-cover" attribute the rate
                     will be calculated such that the image slides until the end of the scrollable content. -->
                <div class="parallax upright1" parallax></div>
                <div class="scene sunset">
                    <h1>Upright Piano</h1>
                    <h2>Compact - for domestic music-making and practice</h2>
                </div>
                <div class="scene solid sunset" parallax-cover>
                    <p>
                        <strong>U</strong>pright pianos, also called vertical pianos, are more compact because the frame
                        and
                        strings are vertical. The hammers move horizontally, and return to their resting position via
                        springs,
                        which are susceptible to degradation.
                    </p>
                    <p>
                        Upright pianos are widely used in churches, community centers, schools, music conservatories and
                        university music programs as rehearsal and practice instruments, and they are popular models for
                        in-home
                        purchase. One of the reasons is because upright pianos are generally less expensive than grand
                        pianos.
                    </p>
                </div>
                <!-- When a rate isn't specified and there is no subsequent element with the "parallax-cover" attribute the rate
                     will be calculated such that the image slides until the end of the scrollable content. -->
                <div class="parallax electronic1" parallax></div>
                <div class="scene star">
                    <h1>Digital Piano</h1>
                    <h2>Non-acoustic - for funk, fusion and rock</h2>
                </div>
                <div class="scene solid woods" parallax-cover>
                    <p>
                        <strong>E</strong>lectric pianos, firstly created from the late 1920s, used metal strings with a
                        magnetic pickup, an amplifier and a loudspeaker. The electric pianos that became most popular in
                        pop and
                        rock music in the 1960s and 1970s.
                    </p>
                    <p>
                        Electric pianos are rarely used in classical music, where the main usage of them is as
                        inexpensive
                        rehearsal or practice instruments in music schools. However, electric pianos became important
                        instruments in 1970s funk and jazz fusion and in some rock music genres.
                    </p>
                </div>
                <!-- When a rate isn't specified and there is no subsequent element with the "parallax-cover" attribute the rate
                     will be calculated such that the image slides until the end of the scrollable content. -->
                <div class="parallax digital1" parallax></div>
                <div class="scene sunset">
                    <h1>Hybrid Piano</h1>
                    <h2>Modern - for recording performance as MIDI</h2>
                </div>
                <div class="scene solid sunset" parallax-cover>
                    <p>
                        <strong>H</strong>ybrid pianos include an acoustic grand piano or upright piano combined with
                        MIDI
                        electronic features. Such a piano can be played acoustically, or the keyboard can be used as a
                        MIDI
                        controller,
                    </p>
                    <p>
                        Some hybrid pianos such as the Yamaha Disklavier electronic player piano, introduced in 1987,
                        are
                        outfitted with electronic sensors for recording and electromechanical solenoids for player
                        piano-style
                        playback. Sensors record the movements of the keys, hammers, and pedals during a performance.
                    </p>
                </div>
                <!-- When a rate isn't specified and there is no subsequent element with the "parallax-cover" attribute the rate
                     will be calculated such that the image slides until the end of the scrollable content. -->
                <div class="parallax grand2" parallax></div>
                <div class="scene woods">
                    <h1>Thank you!</h1>
                </div>
                <div class="scene solid star" parallax-cover>
                    <p>
                        <Strong>W</Strong>ant to find out more about Piano?
                    </p>
                    <p class="pull-flex-end">
                        <a href="https://en.wikipedia.org/wiki/Piano">
                            <img src="https://upload.wikimedia.org/wikipedia/en/8/80/Wikipedia-logo-v2.svg"
                                 style="width: 10vw; float: left; margin-right: 2vw;">
                            ðŸŽ¹ Read further about Piano in this Wikipedia entry!
                        </a>
                    </p>
                </div>
                <!-- When a rate isn't specified and there is no subsequent element with the "parallax-cover" attribute the rate
                     will be calculated such that the image slides until the end of the scrollable content. -->
                <div class="parallax keyWithScore" parallax></div>
                <div class="scene sunset">
                    <h1>Acknowledgement</h1>
                    <h2>Piano background image obtained from: <a href="https://pixabay.com/">Pixabay</a></h2>
                    <h2>And encoded into base64 format by: <a href="https://www.base64-image.de/">BASE64 IMAGE</a></h2>
                    <h2>And parallax effect by: <a
                            href="https://developers.google.com/web/updates/2016/12/performant-parallaxing">Google
                        Developers</a></h2>
                </div>
            </div>
        </div>

        <script>
            // Copied from https://github.com/GoogleChrome/ui-element-samples/blob/gh-pages/parallax/scripts/parallax.js
            /**
             * Copyright 2016 Google Inc. All rights reserved.
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *     http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             *
             */

            function initializeParallax(clip) {
                var parallax = clip.querySelectorAll('*[parallax]');
                var parallaxDetails = [];
                var sticky = false;

                // Edge requires a transform on the document body and a fixed position element
                // in order for it to properly render the parallax effect as you scroll.
                // See https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/5084491/
                if (getComputedStyle(document.body).transform == 'none')
                    document.body.style.transform = 'translateZ(0)';
                var fixedPos = document.createElement('div');
                fixedPos.style.position = 'fixed';
                fixedPos.style.top = '0';
                fixedPos.style.width = '1px';
                fixedPos.style.height = '1px';
                fixedPos.style.zIndex = 1;
                document.body.insertBefore(fixedPos, document.body.firstChild);

                for (var i = 0; i < parallax.length; i++) {
                    var elem = parallax[i];
                    var container = elem.parentNode;
                    if (getComputedStyle(container).overflow != 'visible') {
                        console.error('Need non-scrollable container to apply perspective for', elem);
                        continue;
                    }
                    if (clip && container.parentNode != clip) {
                        console.warn('Currently we only track a single overflow clip, but elements from multiple clips found.', elem);
                    }
                    var clip = container.parentNode;
                    if (getComputedStyle(clip).overflow == 'visible') {
                        console.error('Parent of sticky container should be scrollable element', elem);
                    }
                    // TODO(flackr): optimize to not redo this for the same clip/container.
                    var perspectiveElement;
                    if (sticky || getComputedStyle(clip).webkitOverflowScrolling) {
                        sticky = true;
                        perspectiveElement = container;
                    } else {
                        perspectiveElement = clip;
                        container.style.transformStyle = 'preserve-3d';
                    }
                    perspectiveElement.style.perspectiveOrigin = 'bottom right';
                    perspectiveElement.style.perspective = '1px';
                    if (sticky)
                        elem.style.position = '-webkit-sticky';
                    if (sticky)
                        elem.style.top = '0';
                    elem.style.transformOrigin = 'bottom right';

                    // Find the previous and next elements to parallax between.
                    var previousCover = parallax[i].previousElementSibling;
                    while (previousCover && previousCover.hasAttribute('parallax'))
                        previousCover = previousCover.previousElementSibling;
                    var nextCover = parallax[i].nextElementSibling;
                    while (nextCover && !nextCover.hasAttribute('parallax-cover'))
                        nextCover = nextCover.nextElementSibling;

                    parallaxDetails.push({
                        'node': parallax[i],
                        'top': parallax[i].offsetTop,
                        'sticky': !!sticky,
                        'nextCover': nextCover,
                        'previousCover': previousCover
                    });
                }

                // Add a scroll listener to hide perspective elements when they should no
                // longer be visible.
                clip.addEventListener('scroll', function () {
                    for (var i = 0; i < parallaxDetails.length; i++) {
                        var container = parallaxDetails[i].node.parentNode;
                        var previousCover = parallaxDetails[i].previousCover;
                        var nextCover = parallaxDetails[i].nextCover;
                        var parallaxStart = previousCover ? (previousCover.offsetTop + previousCover.offsetHeight) : 0;
                        var parallaxEnd = nextCover ? nextCover.offsetTop : container.offsetHeight;
                        var threshold = 200;
                        var visible = parallaxStart - threshold - clip.clientHeight < clip.scrollTop &&
                            parallaxEnd + threshold > clip.scrollTop;
                        // FIXME: Repainting the images while scrolling can cause jank.
                        // For now, keep them all.
                        // var display = visible ? 'block' : 'none'
                        var display = 'block';
                        if (parallaxDetails[i].node.style.display != display)
                            parallaxDetails[i].node.style.display = display;
                    }
                });
                window.addEventListener('resize', onResize.bind(null, parallaxDetails));
                onResize(parallaxDetails);
                for (var i = 0; i < parallax.length; i++) {
                    parallax[i].parentNode.insertBefore(parallax[i], parallax[i].parentNode.firstChild);
                }
            }

            function onResize(details) {
                for (var i = 0; i < details.length; i++) {
                    var container = details[i].node.parentNode;

                    var clip = container.parentNode;
                    var previousCover = details[i].previousCover;
                    var nextCover = details[i].nextCover;
                    var rate = details[i].node.getAttribute('parallax');

                    var parallaxStart = previousCover ? (previousCover.offsetTop + previousCover.offsetHeight) : 0;
                    var scrollbarWidth = details[i].sticky ? 0 : clip.offsetWidth - clip.clientWidth;
                    var parallaxElem = details[i].sticky ? container : clip;
                    var height = details[i].node.offsetHeight;
                    var depth = 0;
                    if (rate) {
                        depth = 1 - (1 / rate);
                    } else {
                        var parallaxEnd = nextCover ? nextCover.offsetTop : container.offsetHeight;
                        depth = (height - parallaxEnd + parallaxStart) / (height - clip.clientHeight);
                    }
                    if (details[i].sticky)
                        depth = 1.0 / depth;

                    var scale = 1.0 / (1.0 - depth);

                    // The scrollbar is included in the 'bottom right' perspective origin.
                    var dx = scrollbarWidth * (scale - 1);
                    // Offset for the position within the container.
                    var dy = details[i].sticky ?
                        -(clip.scrollHeight - parallaxStart - height) * (1 - scale) :
                        (parallaxStart - depth * (height - clip.clientHeight)) * scale;

                    details[i].node.style.transform = 'scale(' + (1 - depth) + ') translate3d(' + dx + 'px, ' + dy + 'px, ' + depth + 'px)';
                }
            }
        </script>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                initializeParallax(document.querySelector('.viewport'));
            });
        </script>
    </body>
</html>
